import os

def is_number(string):
    try:
        # Check if the string is a valid integer
        int_value = int(string)
        return True
    except ValueError:
        try:
            # Check if the string is a valid float
            float_value = float(string)
            return True
        except ValueError:
            return False

def create_log_file(filename, target_directory, size_mb):
    all_files = os.listdir(target_directory)

    filtered_files = [file for file in all_files if filename in file]

    if(filtered_files.__len__() == 0):
        logger_file_name = os.path.join(target_directory, filename + '.log')
        with open(logger_file_name, 'w') as file:
            file.write('Create')
        return logger_file_name
         
    filtered_files = sorted(filtered_files)

    poradove_cislo = ""

    parts = filtered_files[-1].split('_')
    rozdeleni_posledni_casti = parts[-1].split('.')

    file_size_bytes  = os.path.getsize(os.path.join(target_directory, filtered_files[-1]))

    if(is_number(rozdeleni_posledni_casti[0])):      
        if (file_size_bytes > 10 * 1024 * 1024):
            poradove_cislo = "_" +  str((int(rozdeleni_posledni_casti[0]) + 1))
        else:
            poradove_cislo = "_" +  str(int(rozdeleni_posledni_casti[0]))
    else:
        if (file_size_bytes > 10 * 1024 * 1024):
            poradove_cislo = "_" + "1"

    logger_file_name = os.path.join(target_directory, filename + poradove_cislo + '.log')
    with open(logger_file_name, 'w') as file:
        file.write('Create')

    return logger_file_name